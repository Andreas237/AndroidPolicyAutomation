var btnsdk=function(e){"use strict";function t(e){const t=l.sanitizedInput(e,o.currentFillId);return!!t&&o.observeFields(window,t)}function n(e){const t=l.sanitizedInput(e,o.currentFillId,!0);return!!t&&(r.fillFields(o.addElementsToFields(t)),!0)}const i={info(...e){}},l={generateUUIDv4(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},postMessage(e,t,n,l){const r=t[l];"ios"===l?(i.info(e.webkit),i.info(e.webkit.messageHandlers),i.info(e.webkit.messageHandlers[r]),e.webkit.messageHandlers[r].postMessage(n)):"android"===l&&e[r](JSON.stringify(n))},sanitizedInput(e,t,n=!1){if(!e)return null;const i=e.fill_id;if(!i||i!==t)return null;const{fields:fields}=e;if(!fields||0===fields.length)return null;const l=[],r=fields.length;for(let e=0;e<r;e+=1){const t=fields[e];t.param&&"ignore"!==t.param&&(t.param&&t.pop_id&&(!n||t.value)&&t.input_type.match(/^(text|email)$/)&&l.push({param:t.param,pop_id:t.pop_id,value:t.value}))}return 0===l.length?null:l}},r={getLabelMappings(e){if(!e)return null;const t=e.getElementsByTagName("label"),n=t.length,i={};for(let e=0;e<n;e+=1){const n=t[e].htmlFor;""!==n&&(i[n]=t[e].textContent)}return i},getFields(e,t){const n=[],{forms:forms}=e,i=forms.length;if(0===i)return null;const r=this.getLabelMappings(e);for(let e=0;e<i;e+=1){const{elements:elements}=forms[e],t=elements.length;for(let e=0;e<t;e+=1){const t=elements[e];if("text"===t.type){const e={element:t,pop_id:l.generateUUIDv4(),id:t.id,name:t.name,placeholder:t.placeholder,tag_name:t.tagName,type:t.type,autocomplete:t.autocomplete,autocompletetype:t.autocompletetype,readonly:t.readonly,disabled:t.disabled};r&&(e.label=r[t.id]),n.push(e)}}}return{fillId:t,fields:n}},fillFields(e){const t=e.length;for(let n=0;n<t;n+=1){const{element:element,value:value}=e[n];element&&value&&(element.value=value)}}},o={currentFillId:void 0,currentFields:void 0,submittedFillId:void 0,submittedFields:void 0,_inputListener(e){const t=o.currentFields.length;for(let n=0;n<t;n+=1)o.currentFields[n].element===e.target&&(o.currentFields[n].inputValue=e.target.value,i.info("setting input value",e.target.value,o.currentFields))},startNewSession(e){o.currentFillId=l.generateUUIDv4(),o.currentFields=[],e.removeEventListener("input",o._inputListener);const t=r.getFields(e.document,o.currentFillId);return!(!t||!t.fields||t.fillId!==o.currentFillId||0===t.fields.length)&&(o.currentFields=t.fields,!0)},removeElementsFromFields(e){const t=[],n=e.length;for(let i=0;i<n;i+=1){const n=Object.assign({},e[i]);delete n.element,t.push(n)}return t},addElementsToFields(e){const t=[],n=e.length;for(let i=0;i<n;i+=1){const n=Object.assign({},e[i]),l=o.currentFields.filter(function(e){return e.pop_id===n.pop_id})[0];l&&(n.element=l.element),t.push(n)}return t},observeFields(e,t){const n=[],l=t.length,r=o.currentFields.length;for(let e=0;e<l;e+=1){const l=t[e];for(let s=0;s<r;s+=1){const r=o.currentFields[s];l.pop_id===r.pop_id?(i.info("found a match for field with param: ",l.param),n.push(Object.assign(l,r))):i.info("no match for field to observe with param: ",t[e].param)}}return o.currentFields=n,0!==n.length&&(e.addEventListener("input",o._inputListener),!0)},handleFormSubmission(){if(!o.currentFields||0===o.currentFields.length)return{};o.submittedFillId=o.currentFillId,o.submittedFields=o.currentFields.slice();const e=[],t=o.submittedFields.length;for(let n=0;n<t;n+=1){const t=o.submittedFields[n],{pop_id:pop_id,param:param,inputValue:inputValue}=t;pop_id&&param&&inputValue&&e.push({pop_id:pop_id,param:param,value:inputValue})}return{fill_id:o.submittedFillId,fields:e}}};return window.addEventListener("submit",()=>{const e=o.handleFormSubmission();if(!e||!e.fields||0===e.fields.length)return;const t={ios:"BTNJSAutofillFormSubmitted",android:"onAutofillFormSubmitted"};const n=ButtonSdk;l.postMessage(n,t,e,"android")}),function(e){if(o.startNewSession(e)){const t={url:e.location.href,title:e.document.title},n={fill_id:o.currentFillId,page_info:t,fields:o.removeElementsFromFields(o.currentFields)},i={ios:"BTNJSAutofillFieldsDetected",android:"onAutofillFieldsDetected"},r=ButtonSdk;l.postMessage(r,i,n,"android")}}(window),e.observeFields=t,e.fillFields=n,e}({});